<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>å°é›»ææ–™ç®¡ç†ç³»çµ± </title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&family=Orbitron:wght@600;900&display=swap" rel="stylesheet" />
<style>
:root {
    /* æµ®ä¸–ç¹ªé…è‰²ç›¤ - åƒè€ƒã€Šç¥å¥ˆå·æ²–æµªè£ã€‹ */
    --ukiyo-deep-blue: #1D3B56; /* æ™®é­¯å£«è— */
    --ukiyo-mid-blue: #2A587A;
    --ukiyo-light-blue: #6B93B8;
    --ukiyo-foam: #F0F4F5;      /* æµªèŠ±ç™½ */
    --ukiyo-sky: #E6D3A3;       /* èˆŠå®£ç´™/å¤©ç©ºè‰² */
    --ukiyo-paper: #F2E6D9;
    --glass-bg: rgba(255, 255, 255, 0.85);
    --glass-border: rgba(255, 255, 255, 0.9);
}

body {
    font-family: 'Noto Sans TC', sans-serif;
    margin: 0; 
    padding: 0;
    color: #1a202c;
    overflow-x: hidden; /* é˜²æ­¢æµ·æµªå‹•ç•«é€ æˆå·è»¸ */
    background-color: var(--ukiyo-sky);
    min-height: 100vh;
    position: relative;
}

/* =========================================
   æµ®ä¸–ç¹ªå‹•æ…‹èƒŒæ™¯ (Ukiyo-e Background System)
   ========================================= */
.ukiyo-scene {
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    z-index: -1;
    overflow: hidden;
    /* èˆŠç´™å¼µç´‹ç† */
    background: radial-gradient(circle at 50% 30%, #f7f0e6, var(--ukiyo-sky));
}

/* å¯Œå£«å±± */
.mt-fuji {
    position: absolute;
    bottom: 25%;
    left: 50%;
    transform: translateX(-50%);
    width: 0; height: 0;
    border-left: 150px solid transparent;
    border-right: 150px solid transparent;
    border-bottom: 200px solid #2c3e50;
    z-index: 1;
}
.mt-fuji::after {
    content: '';
    position: absolute;
    top: 60px; left: -150px;
    width: 300px; height: 140px;
    background: linear-gradient(to bottom, #fff 20%, transparent 80%);
    clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
    transform: scale(0.28) translateY(-320px); /* é›ªé ‚ */
}

/* æµ·æµªé€šç”¨è¨­å®š */
.wave {
    position: absolute;
    bottom: 0;
    width: 200%;
    height: 100%;
    background-repeat: repeat-x;
    background-position: bottom;
    transform: translate3d(0, 0, 0);
}

/* SVG æµ·æµªè·¯å¾‘ */
.wave-back {
    z-index: 2;
    height: 45%;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 180' preserveAspectRatio='none'%3E%3Cpath d='M0,120 C150,150 250,80 400,110 C550,140 650,80 800,110 L800,180 L0,180 Z' fill='%232A587A' opacity='0.8'/%3E%3C/svg%3E");
    background-size: 50% 100%;
    animation: moveWave 25s linear infinite;
}

.wave-mid {
    z-index: 3;
    height: 40%;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 180' preserveAspectRatio='none'%3E%3Cpath d='M0,100 C200,60 350,140 600,80 C750,40 800,100 800,100 L800,180 L0,180 Z' fill='%236B93B8' opacity='0.9'/%3E%3C/svg%3E");
    background-size: 50% 100%;
    animation: moveWave 15s linear infinite reverse;
}

.wave-front {
    z-index: 4;
    height: 35%;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 320' preserveAspectRatio='none'%3E%3Cpath fill='%231D3B56' fill-opacity='1' d='M0,160L48,176C96,192,192,224,288,224C384,224,480,192,576,165.3C672,139,768,117,864,128C960,139,1056,181,1152,197.3C1248,213,1344,203,1392,197.3L1440,192L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z'%3E%3C/path%3E%3C/svg%3E");
    background-size: 50% 100%;
    animation: moveWave 10s linear infinite;
}

.wave-foam {
    z-index: 5;
    height: 36%;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 320' preserveAspectRatio='none'%3E%3Cpath fill='%23F0F4F5' fill-opacity='0.4' d='M0,165L48,180C96,195,192,228,288,228C384,228,480,195,576,170C672,145,768,125,864,135C960,145,1056,185,1152,200C1248,215,1344,205,1392,200L1440,195L1440,320L0,320Z'%3E%3C/path%3E%3C/svg%3E");
    background-size: 50% 100%;
    animation: moveWave 10s linear infinite;
    pointer-events: none;
}

@keyframes moveWave {
    0% { transform: translateX(0); }
    100% { transform: translateX(-50%); }
}

/* =========================================
   UI å…§å®¹æ¨£å¼
   ========================================= */

.content-wrapper {
    position: relative;
    z-index: 10;
    padding: 0 16px 80px;
}

header {
    position: sticky; top: 15px; z-index: 100;
    max-width: 900px; margin: 20px auto;
    background: var(--ukiyo-deep-blue);
    color: white; border-radius: 12px; padding: 15px 25px;
    display: flex; align-items: center; justify-content: space-between;
    box-shadow: 0 10px 25px rgba(29, 59, 86, 0.5);
    border: 2px solid #D4AF37;
}

.container-3d {
    background: var(--glass-bg);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    max-width: 850px; margin: 30px auto;
    border-radius: 20px; padding: 40px;
    box-shadow: 0 15px 35px rgba(0,0,0,0.1);
    border: 1px solid var(--glass-border);
    transition: transform 0.3s ease;
}

.container-3d:hover {
    transform: translateY(-5px);
}

h3.section-title {
    color: var(--ukiyo-deep-blue);
    border-left: 6px solid #d64545;
    padding-left: 15px; margin: 30px 0 20px;
    font-size: 1.4rem;
    font-weight: 900;
}

input, select { 
    width: 100%; padding: 12px; 
    border-radius: 8px; border: 1px solid #ccc; 
    font-size: 1rem; 
    background: rgba(255,255,255,0.9);
    box-sizing: border-box; /* ç¢ºä¿ padding ä¸æœƒæ’é–‹å¯¬åº¦ */
}
input:focus, select:focus {
    outline: none;
    border-color: var(--ukiyo-mid-blue);
    box-shadow: 0 0 0 3px rgba(42, 88, 122, 0.2);
}

/* æœå°‹å€å¡Š - æ”¹ç‚º 2x2 æ ¼ç·š */
.search-box {
    background: rgba(29, 59, 86, 0.08);
    padding: 20px; border-radius: 15px;
    margin-bottom: 20px;
    display: grid;
    grid-template-columns: 1fr 1fr; /* å…©æ¬„ */
    gap: 15px;
}

.record-li {
    background: white; border-radius: 12px;
    padding: 15px; margin-bottom: 12px;
    border-left: 5px solid var(--ukiyo-mid-blue);
    box-shadow: 0 4px 6px rgba(0,0,0,0.05);
    transition: 0.2s;
}
.record-li:hover {
    transform: translateX(5px);
    border-left-color: #d64545;
}

.btn-save {
    width: 100%; padding: 18px; border: none; border-radius: 12px;
    background: var(--ukiyo-deep-blue); color: white; font-size: 1.2rem;
    font-weight: 900; cursor: pointer; transition: 0.3s;
    background-image: linear-gradient(45deg, var(--ukiyo-deep-blue), var(--ukiyo-mid-blue));
    margin-top: 15px;
}
.btn-save:hover { 
    background: #d64545; 
    box-shadow: 0 5px 15px rgba(214, 69, 69, 0.4);
    transform: translateY(-2px);
}

.form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 15px; }

/* ä¸‰æ¬„å¼è¨­è¨ˆ (ç”¨æ–¼æ•¸é‡/å–®ä½/è©•åƒ¹) */
.form-row-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin-bottom: 15px; }

.material-btn {
    padding: 12px; 
    background: white; 
    border: 1px solid #ddd; 
    cursor: pointer; 
    border-radius: 8px; 
    text-align: center;
    transition: 0.2s;
    font-weight: 600;
    color: var(--ukiyo-deep-blue);
}
.material-btn:hover {
    border-color: var(--ukiyo-mid-blue);
    background: #f0f7ff;
}
.material-btn.active {
    background: var(--ukiyo-mid-blue);
    color: white;
    border-color: var(--ukiyo-deep-blue);
    transform: scale(0.98);
}

@media (max-width: 768px) { 
    .form-row { grid-template-columns: 1fr; } 
    .form-row-3 { grid-template-columns: 1fr; }
    .search-box { grid-template-columns: 1fr; } /* æ‰‹æ©Ÿç‰ˆæœå°‹è®Šå–®æ¬„ */
}
</style>
</head>
<body>

<div class="ukiyo-scene">
    <div class="mt-fuji"></div>
    <div class="wave wave-back"></div>
    <div class="wave wave-mid"></div>
    <div class="wave wave-front"></div>
    <div class="wave wave-foam"></div>
</div>

<div class="content-wrapper">
    <header>
        <div style="font-family:'Orbitron'; letter-spacing: 1px;">UKIYO TECH</div>
        <div style="font-weight:900; font-size: 1.1rem;">å°é›»ææ–™ç®¡ç†ç³»çµ±</div>
    </header>

    <div class="container-3d">
        <form id="materialForm">
            <h3 class="section-title">å£¹ã€æ—¥æœŸèˆ‡é¡å‹</h3>
            <div class="form-row">
                <div>
                    <label>ç•°å‹•æ—¥æœŸ</label>
                    <input type="date" id="mainDate" required />
                </div>
                <div>
                    <label>å€Ÿç”¨æ—¥æœŸ (ç„¡é ˜æ–™å–®æ‰å¡«å¯«)</label>
                    <input type="date" id="borrowDate" />
                </div>
            </div>
            <div class="form-row">
                <div>
                    <label>ä½œæ¥­é¡å‹</label>
                    <select id="transType">
                        <option value="é ˜æ–™">é ˜æ–™ (Take)</option>
                        <option value="å€Ÿç”¨">å€Ÿç”¨ (Borrow)</option>
                        <option value="é€€æ–™">é€€æ–™ (Return)</option>
                    </select>
                </div>
                <div>
                    <label>å–®è™Ÿ</label>
                    <input type="text" id="orderNo" placeholder="è«‹è¼¸å…¥å–®è™Ÿ" />
                </div>
            </div>

            <h3 class="section-title">è²³ã€äººå“¡èˆ‡ææ–™ (å¿…å¡«)</h3>
            <div class="form-row">
                <input type="text" id="personName" placeholder="é ˜/é€€/å€Ÿç”¨äººå§“å (å¿…å¡«)" required />
                <input type="text" id="staffName" placeholder="ç™¼/æ”¶æ–™ç¶“è¾¦äºº (å¿…å¡«)" required />
            </div>
            <select id="category" onchange="renderMaterials()" style="margin-top:10px">
                <option value="">-- é¸æ“‡ææ–™é¡åˆ¥ --</option>
                <option value="A">A é¡ (ç¤™å­)</option>
                <option value="B">B é¡ (éµä»¶)</option>
                <option value="C">C é¡ (ç·šæ)</option>
                <option value="F">F é¡ (è®Šå£“å™¨)</option>
                <option value="H">H é¡ (é–‹é—œ)</option>
            </select>
            <div id="materialsContainer" style="margin-top:15px; display:grid; grid-template-columns:1fr 1fr; gap:10px"></div>

            <div id="qtySection" style="display:none; margin-top:20px;">
                <div class="form-row-3">
                    <input type="number" id="qty" placeholder="æ•¸é‡" min="1" required />
                    <input type="text" id="unit" placeholder="å–®ä½ (å¦‚: PC/KG/CM)" required />
                    <input type="text" id="evalType" placeholder="è©•åƒ¹é¡å‹ (å¦‚: 1/2/3/4)" />
                </div>
                <button type="submit" class="btn-save">ğŸŒŠ ç¢ºèªå„²å­˜ç´€éŒ„</button>
            </div>
        </form>
    </div>

    <div class="container-3d" style="background: rgba(255, 255, 255, 0.7);">
        <h2 style="color:var(--ukiyo-deep-blue); text-align:center">ğŸ“‹ æ­·å²ç´€éŒ„æŸ¥è©¢</h2>
        
        <div class="search-box">
            <input type="text" id="searchPerson" placeholder="ğŸ” æœå°‹é ˜/é€€/å€Ÿç”¨äºº..." onkeyup="filterHistory()">
            <input type="text" id="searchStaff" placeholder="ğŸ” æœå°‹ç¶“è¾¦äºº..." onkeyup="filterHistory()">
            
            <select id="searchYear" onchange="filterHistory()">
                <option value="">æ‰€æœ‰å¹´ä»½</option>
                <option value="2024">2024å¹´</option>
                <option value="2025">2025å¹´</option>
                <option value="2026">2026å¹´</option>
            </select>
            <select id="searchMonth" onchange="filterHistory()">
                <option value="">æ‰€æœ‰æœˆä»½</option>
                <script>
                    for(let i=1; i<=12; i++) document.write(`<option value="${i.toString().padStart(2,'0')}">${i}æœˆ</option>`);
                </script>
            </select>
        </div>

        <div id="logList"></div>
    </div>
</div>

<script>
// è³‡æ–™
const materialDict = {
    "A": ["èšåˆæŸ±å‹ç¤™å­ 11.4kV", "æ‡¸å‚ç¤™å­ Cå‹ 15000ç£… Ï†10' ç°è‰²", "æ‡¸å‚ç¤™å­ Cå‹ 10000ç£… 6'Ï† ç°è‰²", "é˜²ç›¬è£è…³ç¤™å­ 11.4KV ç„¡è…³", "è»¸å‹ç¤™å­ ä½å£“ è»¸å‹", "æ‹‰ç·šç¤™å­ ä½å£“ å¤§å‹ L139.7ãœ", "èšåˆæŸ±å‹ç¤™å­ 22.8KV", "èšåˆè£è…³ç¤™å­ 11.4KV å¤¾ç·šå‹"],
    "B": ["äº’é€£å™¨ é–“æ¥å‹A / 477MCM XLPE", "äº’é€£å™¨ é–“æ¥å‹B / AWG #2 XLPE", "äº’é€£ç¹© Bå‹/ 112ã", "äº’é€£ç¹© Aå‹ / 52ã", "äº’é€£å™¨ å¤¾æ¢å‹A / 477MCM XLPE", "äº’é€£å™¨ å¤¾æ¢å‹B / AWG #2 XLPE", "é…é›»ç·šè·¯é›»æ¡¿åå…‰è²¼ç´™", "æ‹‰ç·šå¤¾æ¿ éŠ…ç·š 100-150ãœÂ²", "æ‹‰ç·šå¤¾æ¿ é‹ç·š AWG 2/0-#2", "Vå‹æ›éµ Aå‹ç„¡ç¸« SS400", "æ´»ç·šç·šå¤¾", "Hå‹å£“æ¥å¥—ç®¡", "ç¢³é‹¼æ“´å¼µèºæ “", "é›»åŠ›ä¿éšªçµ²çµ„æ¶ˆéŸ³å™¨", "é‰»é…¸é‹…ç³Š", "é™æµç†”çµ²", "é›»åŠ›ä¿éšªçµ² 25kV", "é–‹é—œç®± å±‹å¤–å‹", "å£“æ¥å¥—ç®¡", "Cå‹å£“æ¥å¥—ç®¡", "é›»æ¡¿ç¶å¸¶", "è·¯ç‡ˆé–‹é—œ"],
    "C": ["25KVäº¤é€£PEå¼•æ¥ç·š", "600V PVCé‹é¢¨é›¨ç·š", "600V PVCé¢¨é›¨ç·š", "é‹¼å¿ƒé‹ç·š", "å…¨é‹ç·š", "ç¡¬éŠ…çµç·š", "600V PVCé›»ç·š", "ç´ ææœ¨æ©«æ“”", "éé‹…é‹¼çµç·š", "éé‹…éµç·š", "è¼•é‹¼æ©«æ“”", "éé‹…ç­‰é‚Šè§’é‹¼", "ç®¡è·¯å°å¡", "é›»çºœç”¨çµ•ç·£è† è†å¸¶", "è‡ªèæ€§é˜²æ°´è† å¸¶", "é å¼µå¼é›»çºœçµ‚ç«¯æ¥é ­", "å¥—ç®¡æ’é ­", "é é‘„å‹é›»çºœç›´ç·šæ¥é ­", "æ’é ­å°å¥—", "è² è¼‰å¯åˆ‡è‚˜å‹ç«¯é ­", "å››è·¯åˆ†æ­§æ’é ­", "é›™é€šå¥—ç®¡æ’é ­", "çŒè† å¼é›»çºœåˆ†æ­§æ¥é ­", "æ¥æˆ¶æ©«æœ¨"],
    "F": ["äº­ç½®å¼é–‹é—œ", "éæ™¶è³ªéµå¿ƒæ¡¿ä¸Šè®Šå£“å™¨", "æ”¹è‰¯å¥—ç®¡å‹æ¡¿ä¸Šè®Šå£“å™¨", "å¯†å°å‹æ¡¿ä¸Šè®Šå£“å™¨", "æ¡¿ä¸Šè®Šå£“å™¨", "é›»å®¹å™¨ç”¨æ²¹é–‹é—œ", "é«˜å£“é›»å®¹å™¨", "äº­ç½®å¼è®Šå£“å™¨", "äº­ç½®å¼æ°£å°é–‹é—œ", "åœ°ä¸‹å››è·¯è‡ªå‹•ç·šè·¯é–‹é—œ", "é«˜å£“é…é›»ç®±", "é åŠ›æ··å‡åœŸåŸºæ¨", "é åŠ›é›»æ¡¿", "äººå­”è“‹", "æ°´æ³¥è…³æœ¨", "æ‰‹å­”è“‹"],
    "H": ["é›»åŠ›ä¿éšªçµ²åº§", "é™æµç†”çµ²åº§", "ç·šè·¯æ•…éšœæŒ‡ç¤ºå™¨", "èšåˆå‹ç†”çµ²éˆé–‹é—œ", "é…é›»ç´šç“·å¥—ç®¡é¿é›·å™¨", "é…é›»ç´šèšåˆå¥—ç®¡é¿é›·å™¨", "é«˜å£“è¢«è¦†ç½©", "è¢«è¦†ç½©", "æ‰‹å‹•å‹ç·šè·¯è² è¼‰å•Ÿæ–·é–‹é—œ", "æ¶ç©ºè‡ªå‹•ç·šè·¯é–‹é—œ", "è² è¼‰å•Ÿæ–·é–‹é—œ", "ç†”çµ²éˆé–‹é—œ", "Uå‹è»‹é ­", "ç¢³é‹¼å–®çœ¼èºå¸½", "æ¥åœ°éŠ…æ£’"]
};

let records = JSON.parse(localStorage.getItem("ukiyo_db_v4") || "[]");
let selectedItem = "";

function renderMaterials() {
    const cat = document.getElementById("category").value;
    const box = document.getElementById("materialsContainer");
    box.innerHTML = "";
    if(!cat) return;
    materialDict[cat].forEach(m => {
        const d = document.createElement("div");
        d.className = "material-btn";
        d.innerText = m;
        d.onclick = () => {
            selectedItem = m;
            document.getElementById("qtySection").style.display = "block";
            Array.from(box.children).forEach(c => c.classList.remove("active"));
            d.classList.add("active");
        };
        box.appendChild(d);
    });
}

document.getElementById("materialForm").onsubmit = function(e) {
    e.preventDefault();
    
    // å†æ¬¡ç¢ºèªå¿…å¡«æ¬„ä½ (é›–ç„¶ HTML required å·²æ“‹ï¼Œä½†ä»¥é˜²è¬ä¸€)
    const pName = document.getElementById("personName").value;
    const sName = document.getElementById("staffName").value;
    if(!pName || !sName) {
        alert("è«‹å¡«å¯«äººå“¡èˆ‡ç¶“è¾¦äººå§“åï¼");
        return;
    }

    const data = {
        id: Date.now(),
        date: document.getElementById("mainDate").value,
        type: document.getElementById("transType").value,
        person: pName,
        staff: sName,
        item: selectedItem,
        qty: document.getElementById("qty").value,
        unit: document.getElementById("unit").value, // åˆ†é–‹å„²å­˜å–®ä½
        evalType: document.getElementById("evalType").value // æ–°å¢è©•åƒ¹é¡å‹
    };
    records.unshift(data);
    localStorage.setItem("ukiyo_db_v4", JSON.stringify(records));
    alert("ğŸŒŠ ç´€éŒ„å·²å¯«å…¥æµ®ä¸–ç¹ªå·è»¸ï¼");
    filterHistory();
    // é¸æ“‡æ€§é‡ç½®è¡¨å–®
    document.getElementById("qty").value = "";
};

function filterHistory() {
    // å–å¾—æ–°çš„æœå°‹æ¬„ä½å€¼
    const sPerson = document.getElementById("searchPerson").value.toLowerCase();
    const sStaff = document.getElementById("searchStaff").value.toLowerCase();
    const sYear = document.getElementById("searchYear").value;
    const sMonth = document.getElementById("searchMonth").value;
    
    const list = document.getElementById("logList");
    list.innerHTML = "";

    records.forEach(r => {
        const [rYear, rMonth] = r.date.split("-");
        
        // æœå°‹é‚è¼¯ï¼šåˆ†é–‹æ¯”å°
        const matchPerson = sPerson === "" || r.person.toLowerCase().includes(sPerson);
        const matchStaff = sStaff === "" || r.staff.toLowerCase().includes(sStaff);
        const matchYear = sYear === "" || rYear === sYear;
        const matchMonth = sMonth === "" || rMonth === sMonth;

        // å…¨éƒ¨æ¢ä»¶éƒ½ç¬¦åˆæ‰é¡¯ç¤º
        if(matchPerson && matchStaff && matchYear && matchMonth) {
            const div = document.createElement("div");
            div.className = "record-li";
            
            // è™•ç†è©•åƒ¹é¡å‹é¡¯ç¤ºï¼Œè‹¥æœ‰å€¼å‰‡é¡¯ç¤ºï¼Œç„¡å‰‡ä¸é¡¯ç¤º
            const evalDisplay = r.evalType ? `<span style="background:#eee; padding:2px 6px; border-radius:4px; font-size:0.8em; color:#555; margin-left:5px;">è©•:${r.evalType}</span>` : "";

            div.innerHTML = `
                <div style="display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap;">
                    <span><b>${r.date}</b> <span style="color:#d64545; font-size:0.9em; border:1px solid #d64545; padding:2px 5px; border-radius:4px">${r.type}</span></span>
                    <span style="color:var(--ukiyo-mid-blue); font-weight:bold;">${r.item}</span>
                </div>
                <div style="margin-top:8px; color:#4a5568; font-size:0.95em; line-height:1.5; border-top:1px dashed #eee; padding-top:5px;">
                    <div>æ•¸é‡ï¼š<b>${r.qty}</b> <span style="color:#666">${r.unit}</span> ${evalDisplay}</div>
                    <div style="display:flex; justify-content:space-between; margin-top:4px;">
                        <span>ğŸ‘¤ ${r.person}</span>
                        <span>ğŸ–Šï¸ ç¶“è¾¦: ${r.staff}</span>
                    </div>
                </div>
            `;
            list.appendChild(div);
        }
    });
}

// åˆå§‹è¨­å®š
document.getElementById("mainDate").valueAsDate = new Date();
filterHistory();
</script>
</body>
</html>
